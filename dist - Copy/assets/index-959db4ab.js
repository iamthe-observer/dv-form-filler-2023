import{_ as h}from"./_plugin-vue_export-helper-c27b6911.js";import{o as i,c as _,b as t,k as E,p as R,l as T,h as V,m as d,u as B,n as D,q as b,a,w as v,v as g,s as w,t as U,x as j}from"./base-606b8221.js";import{_ as A}from"./RandomText.vue_vue_type_script_setup_true_lang-1ab2db4c.js";import{s as L,u as y,a as x}from"./app-9297243d.js";const M={},$=n=>(R("data-v-ec325757"),n=n(),T(),n),q={class:"btn",id:"btn1"},F=$(()=>t("button",{class:"btn",id:"btn2"},null,-1)),N=$(()=>t("button",{class:"btn",id:"btn3"},null,-1));function P(n,p){return i(),_("main",null,[t("button",q,[E(n.$slots,"default",{},void 0,!0)]),F,N])}const G=h(M,[["render",P],["__scopeId","data-v-ec325757"]]);const W={},z={class:"loader"};function H(n,p){return i(),_("span",z)}const J=h(W,[["render",H],["__scopeId","data-v-2f30ac1b"]]),K={key:0,class:"flex w-full h-full justify-center items-center bg-neutral-900 min-h-[400px]"},O={key:1,class:"flex flex-col min-h-[400px] items-center gap-2 w-full bg-black text-white rounded-md p-3"},Q={class:"flex items-center justify-center w-full min-h-fit bg-neutral-800 rounded-2xl border border-2 border-neutral-700"},X=["onSubmit"],Y={class:"flex-1 flex justify-center items-center h-14"},Z=V({__name:"index",setup(n){const{app_loading:p}=L(y()),o=d(""),l=d(""),k=B(),I=D();console.log(I.path);const r=d(!1),c=d("");async function S(){if(r.value=!0,(!o.value||!l.value)&&o.value.includes("@"))return r.value=!1,c.value="Enter Correct Credentials!";try{let{error:s}=await x.auth.signInWithPassword({email:o.value,password:l.value});if(s)throw s;console.log("Logged In!"),r.value=!1;const{data:{user:e}}=await x.auth.getUser();let{data:u}=await x.from("profiles").select("*").eq("id",e==null?void 0:e.id);return y().$patch({profile:u[0]}),console.log(u),k.push("/main"),!0}catch(s){c.value=s.message,console.log(c.value),setTimeout(()=>{c.value=""},4e3),alert(s)}finally{r.value=!1}}return(s,e)=>{const u=J,f=A,C=G;return b(p)?(i(),_("div",K,[a(u)])):(i(),_("div",O,[t("div",Q,[a(f,{idx:0,class:"text-3xl font-bold uppercase text-neutral-300 py-3",ctnt:"DV Form Filler",speed:6})]),t("form",{class:"flex flex-col p-3 w-full h-full flex-1 h-4 bg-neutral-800 rounded-2xl border border-2 border-neutral-700 gap-2",onSubmit:j(S,["prevent"])},[a(f,{idx:2,class:"text-lg text-neutral-400 mx-auto pb-5",speed:6,ctnt:"Enter Credentials for EG-Datapoint"}),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>w(o)?o.value=m:null),type:"email",class:"w-full tracking-wider font-bold h-14 rounded-xl text-center bg-black border-none focus:outline-none",placeholder:"Email"},null,512),[[g,b(o)]]),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>w(l)?l.value=m:null),type:"password",class:"w-full font-bold h-14 rounded-xl text-center bg-black border-none focus:outline-none",placeholder:"Password"},null,512),[[g,b(l)]]),t("div",Y,[a(C,null,{default:U(()=>[a(f,{idx:3,class:"text-lg font-bold",speed:20,increment:10,ctnt:"Sign In"})]),_:1})])],40,X)]))}}});const se=h(Z,[["__scopeId","data-v-9ba54fb1"]]);export{se as default};
